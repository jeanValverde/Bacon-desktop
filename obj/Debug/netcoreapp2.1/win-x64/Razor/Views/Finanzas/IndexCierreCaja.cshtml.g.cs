#pragma checksum "C:\Users\CRISTIAN\Desktop\proyecto_portafolio\bacon-desktop\Views\Finanzas\IndexCierreCaja.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "14d8e5df3ea5bd5b73c4e719a4aa21610db84ace"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Finanzas_IndexCierreCaja), @"mvc.1.0.view", @"/Views/Finanzas/IndexCierreCaja.cshtml")]
[assembly:global::Microsoft.AspNetCore.Mvc.Razor.Compilation.RazorViewAttribute(@"/Views/Finanzas/IndexCierreCaja.cshtml", typeof(AspNetCore.Views_Finanzas_IndexCierreCaja))]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"14d8e5df3ea5bd5b73c4e719a4aa21610db84ace", @"/Views/Finanzas/IndexCierreCaja.cshtml")]
    public class Views_Finanzas_IndexCierreCaja : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<dynamic>
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            BeginContext(0, 12578, true);
            WriteLiteral(@"<bacon class=""task-bacon"">

    <input type='hidden' id='montoInicialCierreCaja' />
    <input type='hidden' id='montoHoyCierreCaja' />
    <div id=""loader-cierre-caja"" class=""col-md-12"" style=""height: 600px"">
        
            <div class=""square-box-loader"">
                <div class=""square-box-loader-container"">
                    <div class=""square-box-loader-corner-top""></div>
                    <div class=""square-box-loader-corner-bottom""></div>
                </div>
                <div class=""square-box-loader-square""></div>
            </div>
        
    </div>
    <div id=""target-main-cierre-caja"">
        <div class=""row"" id=""target-ord-inicio-cierre-caja"">

        </div>

        <div class=""row"" id=""target-ord-boletas-cierre-caja"" style=""padding-top: 12px"">

        </div>
        <div class=""row"" id=""target-ord-cierre-caja"" style=""padding-top: 12px"">

        </div>

    </div>

    <script type=""text/javascript"">

        function finanzasIndexCierreCaja(");
            WriteLiteral(@") {
            document.getElementById(""target-main-cierre-caja"").hidden = true;
            document.getElementById(""loader-cierre-caja"").hidden = false;
            cargarUltimoCierreCaja();
            cargarBoletas();

        }

        /* -------------------------- ULTIMO CIERRE CAJA -------------------------- */
        var gananciasHoy;
        function cargarUltimoCierreCaja() {
            ipcRenderer.send(""async-ultimo-cierre-caja"", 'buscar');
        }
        ipcRenderer.on('asynchronous-reply-ultimo-cierre-caja', (event, arg) => {
            var montoInicial = new Number();
            let inicio = """";
            var hoy = new Date();
            document.getElementById('target-ord-inicio-cierre-caja').innerHTML = """";
            inicio += ""<div class='col-12' style='text-align:center'>""
                + ""<div class='card icon-card-primary'>""
                + ""<div class='card-body text-center'>""
                + "" <h2>Cierre caja "" + hoy.getDate() + ""-"" + Number(hoy.g");
            WriteLiteral(@"etMonth() + 1) + ""-"" + hoy.getFullYear() + ""</h2>""
                + ""</div>""
                + ""</div>""
                + ""</div>""
                + ""<div class='col-4' style='padding-top: 12px'>""
                + ""<div class='form-group'>""
                + ""<div class='input-group-prepend'>""
                + ""<span class='input-group-text bg-primary text-white'>Monto Inicial $</span>"";
            if (arg == -1) {
                inicio += ""<input id='montoInicial' type='text' class='form-control form-control-lg' disabled value='0' />"";

            } else {
                inicio += ""<input id='montoInicial' type='text' class='form-control form-control-lg' disabled value='"" + arg.montoFinal + ""' />"";
            }
            inicio += ""</div>""
                + ""</div>""
                + ""</div>"";
            document.getElementById('target-ord-inicio-cierre-caja').innerHTML = inicio;
            if (arg == -1) {
                document.getElementById('montoInicialCierreCaja').value");
            WriteLiteral(@" = 0;
            } else {
                document.getElementById('montoInicialCierreCaja').value = arg.montoFinal;
            }
            inicio = """";

            montoInicial = Number(arg.montoFinal) + 2;

        });

        /* -------------------------- FIN ULTIMO CIERRE CAJA -------------------------- */
        /* -------------------------- BOLETAS -------------------------- */
        function cargarBoletas() {
            ipcRenderer.send(""async-boletas-cierre-caja"", 'buscar');
        }
        ipcRenderer.on('asynchronous-reply-boletas-cierre-caja', (event, arg) => {
            document.getElementById(""target-main-cierre-caja"").hidden = false;
            document.getElementById(""loader-cierre-caja"").hidden = true;
            let boletas = """";

            var montoTotalHoy = new Number();

            document.getElementById('target-ord-boletas-cierre-caja').innerHTML = """";
            document.getElementById('target-ord-cierre-caja').innerHTML = """";
            if (");
            WriteLiteral(@"arg.length == 0) {
                boletas = ""<div class='col-12' style='text-align:center'>""
                    + ""<div class=' icon-card-primary'>""
                    + ""<div class='card-body text-center'>""
                    + "" <h2>Hoy no se han registrado boletas!</h2>""
                    + ""</div>""
                    + ""</div>""
                    + ""</div>""
            }
            if (arg !== -1) {
                for (var i = 0; i < arg.length; i++) {
                    montoTotalHoy = montoTotalHoy + arg[i].totalMesa;
                    var fecha = new Date(arg[i].fecha);
                    console.log(fecha.getFullYear());
                    boletas += "" <div class='col-md-4 grid-margin'>""
                        + ""<div class='card-rows'>""
                        + ""<div class='card icon-card-dark mt-4'>""
                        + ""<div class='card-body text-center'>""
                        + ""<h4>Boleta N° "" + arg[i].idBoleta + ""</h4><br />""
                        +");
            WriteLiteral(@" ""<div class='badge badge-outline-primary badge-pill mt-1' style='color:white'>Fecha emición: ""+fecha.getDate()+ ""-""+ Number(fecha.getMonth() + 1)+""-""+fecha.getFullYear()+"" ""+fecha.getHours()+"":""+fecha.getMinutes()+"":""+fecha.getSeconds()+ ""</div>""
                        + ""<div class='card icon-card-light mt-4' style='color:black'>""
                        + ""<div class='card-body'><i class='mdi mdi-cash-multiple'></i>Monto Pagado: "" + arg[i].totalMesa + ""</div>"";
                    if (arg[i].medioPago.idMedioPago == 1) {
                        boletas += ""<div class='card-body'><i class='mdi mdi-credit-card'></i>Medio Pagado: Tarjeta de credito</div>"";
                    }
                    if (arg[i].medioPago.idMedioPago == 2) {
                        boletas += ""<div class='card-body'><i class='mdi mdi-wallet'></i>Medio Pagado: Efectivo </div>"";
                    }
                    boletas += ""<br />""
                        + ""</div><br/>""
                        + ""<button type='");
            WriteLiteral(@"button' class='btn btn-primary btn-lg btn-block mt-2' onclick='modalBoletaFinanzas("" + arg[i].idBoleta + "")'>Ver detalles de boleta</button>""
                        + ""</div>""
                        + ""</div>""
                        + ""</div>""
                        + ""</div>""
                        + ""</div>"";
                }
                document.getElementById('target-ord-boletas-cierre-caja').innerHTML = boletas;
                boletas = """";
                var inicial = document.getElementById('montoInicialCierreCaja').value;
                document.getElementById('montoHoyCierreCaja').value = montoTotalHoy;
                var montoFinal = montoTotalHoy + Number(inicial);
                document.getElementById('target-ord-cierre-caja').innerHTML = """";
                let finalcierrecaja = """";
                finalcierrecaja += ""<div class='col-4' > ""
                    + ""<div class='form-group'>""
                    + ""<div class='input-group-prepend'>""
                  ");
            WriteLiteral(@"  + ""<span class='input-group-text bg-primary text-white'>Recaudación de hoy $</span>""
                    + ""<input type='text' id='recaudacionHoy' class='form-control form-control-lg' disabled value='"" + montoTotalHoy + ""' />""
                    + ""</div>""
                    + ""</div>""
                    + ""</div>""
                    + ""<div class='col-4'>""
                    + ""<div class='form-group'>""
                    + ""<div class='input-group-prepend'>""
                    + ""<span class='input-group-text bg-primary text-white'>Monto actual $</span>""
                    + ""<input id='montoFinal' type='text' class='form-control form-control-lg' disabled value='"" + montoFinal + ""' />""
                    + ""</div>""
                    + ""</div>""
                    + ""</div>""
                    + ""<div class='col-4'>""
                    + ""<div class='form-group'>"";
                if (arg.length == 0) {
                    finalcierrecaja += ""<button type='button' disabled clas");
            WriteLiteral(@"s='btn btn-primary btn-lg btn-block mt-2'><i class='mdi mdi-border-color'></i> Cambiar</button>"";
                } else {
                    finalcierrecaja += ""<button type='button' onclick='cambiarMontoCierre()'  class='btn btn-primary btn-lg btn-block mt-2'><i class='mdi mdi-border-color'></i> Cambiar</button>"";
                }

                finalcierrecaja += ""</div>""
                    + ""</div>""
                    + ""</div>""
                    + ""<div class='col-12'>"";
                if (arg.length == 0) {
                    finalcierrecaja += ""<button type='button' onclick='realizarCierreCaja()' disabled class='btn btn-primary btn-lg btn-block mt-2'>Cerrar caja</button>"";
                } else {
                    finalcierrecaja += ""<button type='button' onclick='realizarCierreCaja()' class='btn btn-primary btn-lg btn-block mt-2'>Cerrar caja</button>"";
                }

                finalcierrecaja += ""</div>"";
                document.getElementById('target-ord-cierr");
            WriteLiteral(@"e-caja').innerHTML = finalcierrecaja;
                finalcierrecaja = """";


            } else {
                boletas = ""<div class='col-12' style='text-align:center'>""
                    + ""<div class=' icon-card-primary'>""
                    + ""<div class='card-body text-center'>""
                    + "" <h2>Ya se registró un cierre de caja para hoy!</h2>""
                    + ""</div>""
                    + ""</div>""
                document.getElementById('target-ord-boletas-cierre-caja').innerHTML = boletas;
                boletas = """";
            }

            //  alert(montoInicial);

        });


        /* -------------------------- FIN BOLETAS -------------------------- */
        function realizarCierreCaja() {
            var montoFinal = document.getElementById(""montoFinal"").value;
            console.log(montoFinal);
            if (montoFinal !== """") {
                if (Number.isInteger(montoFinal)) {
                    if (Number(montoFinal) < 0) {
     ");
            WriteLiteral(@"                   alert('El monto final debe ser mayor o igual a 0');
                    } else {
                        ipcRenderer.send(""information-dialog-cierre-caja"");
                    }
                    
                } else {
                    alert('El monto final debe ser un numero entero');
                }
            } else {
                alert('Ingrese un monto final');
            }

        }
        ipcRenderer.on(""information-dialog-reply-cierre-caja"", (sender, index) => {

            if (index == 0) {
                var montoInicial = Number(document.getElementById(""montoInicial"").value);
                var recaudacionHoy = Number(document.getElementById(""recaudacionHoy"").value);
                var montoFinal = Number(document.getElementById(""montoFinal"").value);
                var datos = [{
                    ""montoInicial"": montoInicial,
                    ""recaudacionHoy"": recaudacionHoy,
                    ""montoFinal"": montoFinal
        ");
            WriteLiteral(@"        }]
                ipcRenderer.send('async-cerrar-caja', datos);
                document.getElementById(""target-main-cierre-caja"").hidden = true;
                document.getElementById(""loader-cierre-caja"").hidden = false;
            }


        });

        ipcRenderer.on('asynchronous-reply-cerrar-caja', (event, arg) => {
            document.getElementById(""target-main-cierre-caja"").hidden = false;
            document.getElementById(""loader-cierre-caja"").hidden = true;
            if (arg == 1) {
                alert('Se ha realizado el cierre de caja exitosamente');
            } else if (arg == -1) {
                alert('No se pudo realizar el cierre de caja');
            }
            cargarBoletas();


        });
        function modalBoletaFinanzas(idBoleta) {

            ipcRenderer.send(""modalBoleta-window-finanzas"", idBoleta);
        }

        function cambiarMontoCierre() {
            ipcRenderer.send(""information-dialog-cambiarMontoFinal-cierre-caja");
            WriteLiteral(@""");
        }
        ipcRenderer.on(""information-dialog-reply-cambiarMontoFinal-cierre-caja"", (sender, index) => {


            if (index == 0) {
                document.getElementById(""montoFinal"").disabled = false;

            }


        });


    </script>
</bacon>
");
            EndContext();
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<dynamic> Html { get; private set; }
    }
}
#pragma warning restore 1591
