<bacon class="task-bacon">


    <div class="row">
        <button onclick=cargarMesaHab() type="button" class="btn btn-primary btn-lg btn-block mt-2"> Mesas Habilitadas </button>
        <button onclick=cargarMesaDesb() type="button" class="btn btn-primary btn-lg btn-block mt-2"> Mesas Deshabilitadas </button>
        <button onclick=cargarMesaEsp() type="button" class="btn btn-primary btn-lg btn-block mt-2"> Mesas En Espera </button>
    </div>


    <div class="card-columns" id="target-ord-mesaHabilitada" style="column-count: 4">

    </div>

    <script type="text/javascript">

        function mesaHabilitadaIndex() {
            cargarMesaHab();
            cargarMesaDesb();
            cargarMesaEsp();
            timer = false;
        }

        function cargarMesaHab() {
            ipcRenderer.send("async-MesaHabilitada", 'buscar');
            var loader = document.getElementById('loader');
            loader.style.visibility = '';
        }

        ipcRenderer.on('asynchronous-reply-MesaHabilitada', (event, arg) => {

            console.log(arg);

            let mesasHab = "";

            document.getElementById('target-ord-mesaHabilitada').innerHTML = "";

            for (var i = 0; i < arg.length; i++) {

                mesasHab += "<div class='card'><div class='card-body'><div><h5> Numero de mesa <div class='badge badge-pill badge-primary'>" + arg[i].numeroMesa +
                    "</div ></h5 ><h5> Cantidad de Asientos <div class='badge badge-pill badge-primary'>" + arg[i].cantidadAsientosMesa +
                    "</div> </h5><h5> Estado Mesa <div class='badge badge-pill badge-primary'>" + arg[i].estadoMesa + "</div> </h5> <button onclick='modificarMesa(" + arg[i].idMesa + ",2)' type='button' class='btn btn-primary btn-lg btn-block mt-2'> Deshabilitar Mesa </button><button onclick='modificarMesa(" + arg[i].idMesa + ",3)' type='button' class='btn btn-primary btn-lg btn-block mt-2'> Mesa En Espera </button></div></div></div>";
            }

            document.getElementById('target-ord-mesaHabilitada').innerHTML = mesasHab;

            var loader = document.getElementById('loader');
            loader.style.visibility = 'hidden';

        });

        function cargarMesaDesb() {
            ipcRenderer.send("async-MesasDeshabilitadass", 'buscar');
            var loader = document.getElementById('loader');
            loader.style.visibility = '';
        }

        ipcRenderer.on('asynchronous-reply-MesasDeshabilitadasss', (event, arg) => {

            console.log(arg);

            let mesasHab = "";

            document.getElementById('target-ord-mesaHabilitada').innerHTML = "";

            for (var i = 0; i < arg.length; i++) {

                mesasHab += "<div class='card'><div class='card-body'><div><h5> ID Cliente <div class='badge badge-pill badge-primary'>" + arg[i].idCliente + 
                    "</div ></h5 ><h5> Nombre <div class='badge badge-pill badge-primary'>" + arg[i].nombre + 
                    "</div ></h5 ><h5> fecha Ingreso <div class='badge badge-pill badge-primary'>" + arg[i].fechaIngreso + 
                    "</div ></h5 ><h5> Numero Mesa <div class='badge badge-pill badge-primary'>" + arg[i].mesa.numeroMesa + 
                    "</div ></h5 ><h5> Cantidad de Asientos <div class='badge badge-pill badge-primary'>" + arg[i].mesa.cantidadAsientosMesa + 
                    "</div> </h5><h5> Estado Mesa <div class='badge badge-pill badge-primary'>" + arg[i].mesa.estadoMesa + "</div> </h5></div></div></div>";
            }

            document.getElementById('target-ord-mesaHabilitada').innerHTML = mesasHab;

            var loader = document.getElementById('loader');
            loader.style.visibility = 'hidden';

        });

        function cargarMesaEsp() {
            ipcRenderer.send("async-MesaEspera", 'buscar');
            var loader = document.getElementById('loader');
            loader.style.visibility = '';
        }

        ipcRenderer.on('asynchronous-reply-MesaEspera', (event, arg) => {

            console.log(arg);

            let mesasHab = "";

            document.getElementById('target-ord-mesaHabilitada').innerHTML = "";

            for (var i = 0; i < arg.length; i++) {

                mesasHab += "<div class='card'><div class='card-body'><div><h5> Numero de mesa <div class='badge badge-pill badge-primary'>" + arg[i].numeroMesa +
                    "</div ></h5 ><h5> Cantidad de Asientos <div class='badge badge-pill badge-primary'>" + arg[i].cantidadAsientosMesa +
                    "</div> </h5><h5> Estado Mesa <div class='badge badge-pill badge-primary'>" + arg[i].estadoMesa + "</div> </h5></div></div></div>";
            }

            document.getElementById('target-ord-mesaHabilitada').innerHTML = mesasHab;

            var loader = document.getElementById('loader');
            loader.style.visibility = 'hidden';

        });

        function modificarMesa(idMesa, estado_mesa) {

            var datos = [{ "id_mesa": idMesa, "estado_mesa": estado_mesa }];

            ipcRenderer.send('async-ModificarMesa', datos);
            var loader = document.getElementById('loader');
            loader.style.visibility = '';

        }

        ipcRenderer.on('asynchronous-reply-ModificarMesa', (event, arg) => {

            cargarMesaHab();

            var loader = document.getElementById('loader');
            loader.style.visibility = 'hidden';

        });






    </script>




</bacon>